<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Restoration Effects on Water Quality at the North Campus Open Space</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Devereux_Nutrients_results_files/libs/clipboard/clipboard.min.js"></script>
<script src="Devereux_Nutrients_results_files/libs/quarto-html/quarto.js"></script>
<script src="Devereux_Nutrients_results_files/libs/quarto-html/popper.min.js"></script>
<script src="Devereux_Nutrients_results_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Devereux_Nutrients_results_files/libs/quarto-html/anchor.min.js"></script>
<link href="Devereux_Nutrients_results_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Devereux_Nutrients_results_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Devereux_Nutrients_results_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Devereux_Nutrients_results_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Devereux_Nutrients_results_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="Devereux_Nutrients_results_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="Devereux_Nutrients_results_files/libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="Devereux_Nutrients_results_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="Devereux_Nutrients_results_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="Devereux_Nutrients_results_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="Devereux_Nutrients_results_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="Devereux_Nutrients_results_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="Devereux_Nutrients_results_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Restoration Effects on Water Quality at the North Campus Open Space</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Estuaries are fragile ecosystems that provide a habitat for many organisms including threatened and endangered species. Temporary open closed estuaries (TOCE’s) are especially vulnerable to a changing environment. TOCE’s remain disconnected from the ocean during the dry season; then they fill up during the beginning of the wet season until there is enough water to overtop a sand berm causing a breaching event where the estuary water flows into the ocean. After the sand is scoured away the estuary may remain tidal for up to a few months depending on how high or low the tide is. During low tide the berm may begin to build up causing the estuary to close again.</p>
<p>Understanding water quality of a TOCE is important because it releases nutrients to the ocean and also receives nutrients from the ocean. Nitrogen and Phosphorus are two nutrients of concern found in wetlands due to urban and agricultural runoff (Glandon et al., n.d.; Roberts &amp; Prince, 2010) especially during storm events (Royer et al., 2006). Ammonium (NH4) is a form of nitrogen that is bioavailable and toxic to organisms, therefore it is often measured in wetlands (Clarke &amp; Baldwin, 2002; Sikora et al., 1995; Zhu &amp; Sikora, 1995).</p>
<p>Golf courses often use reclaimed water which can have high concentrations of ammonia (Drewes, 2001; Hu et al., 2016). This is beneficial to the golf courses because the ammonia rich water can help fertilize the course, however the runoff that is not absorbed by vegetation may be toxic to aquatic organisms. Irrigation runoff also causes more frequent flow which reduces the potential for denitrification and phosphorus settling which occurs in stagnant water (Knowles-1982-Denitrification, n.d.; Martínez-Espinosa et al., 2021).</p>
<p>Wetlands and wetland features such as bioswales and riparian zones are a natural management practice capable of removing nutrients (Rickard, 2021). The amount of nutrients removed by a wetland varies greatly with 131% standard deviation in Gonzalez-Meler et al., 2013’s review of wetland efficiency. This could be due to the variation of wetland structures in the studies, the fact that wetlands could have sediment release during large storms and the variation of input to constructed wetlands. For example, many wetland studies are based on waste water treatment plants which have a very high nutrient input, therefore even if a lot of nutrients is removed (grams) the efficiency (%) may still be low. Wetlands can remove nitrogen from the water column by the process of denitrification which breaks the N and O bond in an anoxic environment and emits gaseous O2 and N2 (Knowles, n.d.; Martínez-Espinosa et al., 2021) both which are not harmful and already exist in the air we breathe. Ammonium can also be decomposed and emitted as gaseous ammonia (NH3).</p>
<p>Phosphorus is a positively charged ion that easily bonds to charged sediment particles such as clay and silt (Vidon et al., 2010). Though Phosphorus cannot be removed from the wetland through gaseous release, it easily bonds with sediment to become particulate phosphorus. Particulate phosphorus is not bioavailable to aquatic organisms and may settle to the bottom of the wetland rather than being discharged into the ocean.</p>
</section>
<section id="objective" class="level2">
<h2 class="anchored" data-anchor-id="objective">Objective</h2>
<p>There are two main goals of this report. <strong>1.</strong> To compare the effect of restoration on nutrient concentrations over time. <strong>2.</strong> To compare nutrient concentrations across space of the restored wetland.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<section id="site-description" class="level3">
<h3 class="anchored" data-anchor-id="site-description">Site Description</h3>
<p>North campus open space (formerly ocean meadows golf course) is a 136 acre temporary open closed estuary (TOCE) wetland with restored native grassland, coastal sage scrub, riparian, and vernal pools. The land was operated as a golf course from 1965- 2013. The restoration efforts of North Campus Open Space, began in February 2017 and continues to the present day. Water quality from this estuary is assessed from pre-restoration golf course channel sampling, and in post restoration wetland sampling. The natural wetland was filled in in 1965 to create the golf course and it was re-graded in 2017 to remove the fill from the estimated location of the wetland which was deposited to create the mesa area of the preserve.</p>
<p><img src="Figures/images/golfcourse_nozoom.png" class="img-fluid"></p>
<p><img src="Figures/images/Sample%20locations.png" class="img-fluid"></p>
<p><strong>Figure 1.</strong> Top: Pre-restoration Ocean Meadows golf course (2005). Bottom: Post restoration North Campus Open Space (2024) with sampling locations. Venoco Bridge was sampled both pre and post restoration while Phelps Creek, Devereux Creek and Whittier Drive Storm drain were only sampled post restoration.</p>
</section>
<section id="sample-collection-and-analysis" class="level3">
<h3 class="anchored" data-anchor-id="sample-collection-and-analysis">Sample Collection and Analysis</h3>
<p>Pre-restoration data was collected through the Santa Barbara long term ecological research (LTER). Samples for pre-restoration were collected at what is now Venoco bridge with an ISCO sampler in the years 2003-2011. Samples were collected at varying intervals. The methods and metadata for this project can be found at https://sbclter.msi.ucsb.edu/data/catalog/package/?package=knb-lter-sbc.6. For this study only samples that have at least 0.1 inch of rain were used.</p>
<p>Post restoration data was colected between 2017-2022 by the UCSB Cheadle Center.Data is publically available on Dryad (doi:10.25349/D9VG9J). Post restoration samples were only collected during storm events. To ensure the post restoration data is only representative of storm events we also make sure there was at least 0.1 inches of rain within 24 hours before or after the sample was taken.For post restoration samples were taken at 4 sites, 3 upstream and 1 downstream. Samples for Venoco, Whittier, and Phelps are taken using an ISCO sampler while Devereux creek samples were collected with a grab sample. samples were immediately refrigerated and filtered within 24 hours of collection. Samples stored in HDPE bottles and frozen until shipment for analysis was possible. Samples were send to the UCSB marine science institute analytic laboratory for nutrient analysis of NO3 + NO2, PO4, and NH4 with a precision of +/-5%.</p>
</section>
<section id="rainfall-data" class="level3">
<h3 class="anchored" data-anchor-id="rainfall-data">Rainfall Data</h3>
<p>Rainfall was collected from NOAA station CRND0103-2021-CA_Santa_Barbara_11_W from 2008- 2022. All NOAA daily rainfall data are calculated over the station’s 24-hour local standard time day. County rainfall was used in 2004-2008 before the NOAA station was established https://www.countyofsb.org/3407/Daily-Monthly-Rainfall. Primary station #440- Goleta Fire Station was used for 2004-2008 rainfall data. All county data is recorded as of 8am for the previous 24 hours. We made the decision to combine the two data sets in our efforts to use the best data available at the time. We recognize that using different stations may introduce some error, but since the main point of this research is not on rainfall quantity, but rather just knowing when there is rainfall to interpret samples, we accepted this error. County data reports less rainfall than the NOAA station on average.</p>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="spatial-variation-in-ncos-wetland-nutrients" class="level3">
<h3 class="anchored" data-anchor-id="spatial-variation-in-ncos-wetland-nutrients">Spatial variation in NCOS wetland nutrients</h3>
<p>Whittier, Phelps and Devereux all flow into the Venoco sampling site. We grouped the downstream sites (Devereux, Phelps and Whittier) and compared to the upstream site (Venoco) to see if there is a statistical difference. We used the mann whitney u test for non parametric, and not equally distributed data. Our results show that Phosphate and Nitrate are significantly lower at the downstream site than they are at the upstream sites (P-value &lt; 0.005). This indicates that denitrification and phosphate settling could be happening in the NCOS wetland therefore reducing the nutrient concentration that flows out into the ocean. Ammonia was not significantly different between upstream and downstream sites and the mean upstream concentration is higher than the mean downstream concentration (Table 1).</p>




Nutrient       Upstream Median   Downstream Median     P-value
-------------  ---------------   ------------------    --------
Phosphate          13.2             10.3                 0.002
Nitrate          63.7               28.6                   0.002
Ammonia          3.98               6.43                   0.225

<table></table>
<p><strong>Table 1.</strong> Median Nutrient concentration of Upstream (Phelps Creek, Whittier Creek and Devereux Creek) and Downstream (Venoco Bridge). P-value is from the mann whitney u test for non parametric data.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Devereux_Nutrients_results_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 2.</strong> Nutrient concentration of the 4 sampling locations shown in figure 1. during the 6 water years of post restoration sampling.</p>
<section id="wetland-removal-efficiency" class="level4">
<h4 class="anchored" data-anchor-id="wetland-removal-efficiency">Wetland removal efficiency</h4>
<p>Here we determined the removal factor for each wetland based on the upstream and downstream sampling points (Figure 1). The Of the 253 unique dateties that we took samples 41 had samples taken at the same time for Devereux, Venoco and Whittier storm drain. Only sample that had these three sites plus a Devereux creek sample taken that day were used for this analysis. Devereux creek was sampled via grab samples rather than isco samples, so the sample timing is different than the other three sites. Rather the daily average was used for the devereux creek site.</p>
<p>County subwatersheds along with digital elevation models were used to determine what proportion each subwatershed contributes to the NCOS wetland. Our estimates show that That Devereux sampling represents 41% of the watershed, Devereux creek represents 35%, Whittier represents 5% and 18% of the watershed is between the sampling sites where the subwatersheds merge before reaching Venoco. Of the 82% of the watershed that has been sampled we multiply each sampling location by the proportion of the watershed that it is estimated to represent and add the 3 sampling site proportion together to estimate the combined nutrient export to Venoco bridge. We analysed the data and estimate the removal fraction for each nutrients.</p>




Nutrient       Relative Percent Difference   
-------------  ----------------------------   
Phosphate          37 %             
Nitrate          119 %            
Ammonia          -22 %               
<table></table>
<p><strong>Table 2.</strong> Relative percent difference in nutrients for Nitrogen, Phosphorus and Ammonia at NCOS</p>
</section>
</section>
</section>
<section id="temporal-analysis" class="level2">
<h2 class="anchored" data-anchor-id="temporal-analysis">Temporal Analysis</h2>
<p>Analysis TBD.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e8a62078fcb3d141275a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e8a62078fcb3d141275a">{"x":{"visdat":{"33b45ad55b0b":["function () ","plotlyVisDat"]},"cur_data":"33b45ad55b0b","attrs":{"33b45ad55b0b":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":"Ammonia","inherit":true},"33b45ad55b0b.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":"Phosphate","inherit":true},"33b45ad55b0b.2":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":"Nitrite","inherit":true},"33b45ad55b0b.3":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Ammonia.um"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2008-09-07","2008-09-07","2008-09-08","2008-09-08","2008-10-07","2008-10-07","2008-10-07","2008-10-07","2008-12-08","2008-12-08","2009-01-12","2009-01-12","2009-02-09","2009-02-09","2009-03-09","2009-03-09","2009-04-06","2009-04-06","2009-05-04","2009-05-04","2009-06-08","2009-06-08","2009-07-12","2009-07-13","2009-08-03","2009-08-03","2009-09-13","2009-09-14","2009-11-10","2009-11-10","2009-12-08","2010-01-12","2010-02-09","2010-02-09","2010-03-09","2010-04-12","2010-04-12","2010-06-11","2010-10-04","2010-11-08","2010-11-10","2010-12-07","2010-12-07","2011-01-10","2011-01-11","2011-02-07","2011-02-07","2011-03-07","2011-03-07","2011-04-06","2011-04-06","2011-05-09","2011-05-09","2011-06-13","2011-06-13","2011-08-10","2011-08-10","2011-08-10","2011-08-10","2011-09-07"],"y":[1.2,2.2,6.4,6.3,16.8,12.7,41.6,-1.5,12.2,1.9,1.9,4.3,10.2,10.7,10.2,1939,11.2,29.6,12.4,1.7,0,0.9,1.3,10.2,38.4,1.7,8.1,21,1.5,14,11.7,7.2,0,8,6.2,3.2,0,0,0,0.7,0,0,0,0,0,0,0,0.4,0,0,0,84.5,0,5.2,1.6,0.3,1.6,5,0.9,0],"type":"scatter","mode":"markers","name":"Ammonia","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2008-09-07","2008-09-07","2008-09-08","2008-09-08","2008-10-07","2008-10-07","2008-10-07","2008-10-07","2008-12-08","2008-12-08","2009-01-12","2009-01-12","2009-02-09","2009-02-09","2009-03-09","2009-03-09","2009-04-06","2009-04-06","2009-05-04","2009-05-04","2009-06-08","2009-06-08","2009-07-12","2009-07-13","2009-08-03","2009-08-03","2009-09-13","2009-09-14","2009-11-10","2009-11-10","2009-12-08","2010-01-12","2010-02-09","2010-02-09","2010-03-09","2010-04-12","2010-04-12","2010-06-11","2010-10-04","2010-11-08","2010-11-10","2010-12-07","2010-12-07","2011-01-10","2011-01-11","2011-02-07","2011-02-07","2011-03-07","2011-03-07","2011-04-06","2011-04-06","2011-05-09","2011-05-09","2011-06-13","2011-06-13","2011-08-10","2011-08-10","2011-08-10","2011-08-10","2011-09-07"],"y":[36.8,0,0.8,1.3,1.9,0.7,5.3,34.9,5.8,1.5,0.7,1.1,8.2,27.4,5.6,6.1,4.3,0.9,5.4,0.7,1.4,0.2,34.7,3.3,3,1.6,1.1,4.4,0,3,8.2,4.6,9,12.5,3.7,5.7,6.5,0.4,1.6,0.6,2.7,3.2,0.7,0.4,1,0.2,0.9,0,0,0,1.5,0.4,1.5,1.6,2.4,22,0.2,0.9,1.4,2.3],"type":"scatter","mode":"markers","name":"Phosphate","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2008-09-07","2008-09-07","2008-09-08","2008-09-08","2008-10-07","2008-10-07","2008-10-07","2008-10-07","2008-12-08","2008-12-08","2009-01-12","2009-01-12","2009-02-09","2009-02-09","2009-03-09","2009-03-09","2009-04-06","2009-04-06","2009-05-04","2009-05-04","2009-06-08","2009-06-08","2009-07-12","2009-07-13","2009-08-03","2009-08-03","2009-09-13","2009-09-14","2009-11-10","2009-11-10","2009-12-08","2010-01-12","2010-02-09","2010-02-09","2010-03-09","2010-04-12","2010-04-12","2010-06-11","2010-10-04","2010-11-08","2010-11-10","2010-12-07","2010-12-07","2011-01-10","2011-01-11","2011-02-07","2011-02-07","2011-03-07","2011-03-07","2011-04-06","2011-04-06","2011-05-09","2011-05-09","2011-06-13","2011-06-13","2011-08-10","2011-08-10","2011-08-10","2011-08-10","2011-09-07"],"y":[2.6,355.7,85.9,132.6,39.4,98.8,224.3,14.5,18,58.6,225.6,113.7,55.3,225.7,82.4,632.9,16,505.4,11.7,718.8,564,0,1206.5,9.9,6.6,1928,951.3,2.6,964.4,73.1,171.3,58.6,52.7,220.9,66,134.3,381,25,1236,723.3,11.6,23.6,814.9,298.9,903.2,490.9,1347.6,378.4,1391.3,576.8,1623.8,371.1,2145.7,613.5,1895.2,14.7,791.8,598.9,1844.8,1435.4],"type":"scatter","mode":"markers","name":"Nitrite","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2008-09-07","2008-09-07","2008-09-08","2008-09-08","2008-10-07","2008-10-07","2008-10-07","2008-10-07","2008-12-08","2008-12-08","2009-01-12","2009-01-12","2009-02-09","2009-02-09","2009-03-09","2009-03-09","2009-04-06","2009-04-06","2009-05-04","2009-05-04","2009-06-08","2009-06-08","2009-07-12","2009-07-13","2009-08-03","2009-08-03","2009-09-13","2009-09-14","2009-11-10","2009-11-10","2009-12-08","2010-01-12","2010-02-09","2010-02-09","2010-03-09","2010-04-12","2010-04-12","2010-06-11","2010-10-04","2010-11-08","2010-11-10","2010-12-07","2010-12-07","2011-01-10","2011-01-11","2011-02-07","2011-02-07","2011-03-07","2011-03-07","2011-04-06","2011-04-06","2011-05-09","2011-05-09","2011-06-13","2011-06-13","2011-08-10","2011-08-10","2011-08-10","2011-08-10","2011-09-07"],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0.75,0.75,0,0,0,0,0,0,0,0,0,0,0,0,0.02,0,0.03,0.03,0,0.18,0.8,0.8,0,0.15,0.15,0,0.05,0,0,0,0,0.02,0,0.07,0.07,0,0,0.02,0.02,0,0,0,0,0,0,0,0,0],"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2c0a33d0ce66ffdeb4cb" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2c0a33d0ce66ffdeb4cb">{"x":{"visdat":{"33b45501263d":["function () ","plotlyVisDat"]},"cur_data":"33b45501263d","attrs":{"33b45501263d":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":{},"inherit":true},"33b45501263d.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Phosphate.um"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2018-01-09","2018-03-21","2019-11-27","2019-12-04","2019-12-16","2019-12-22","2020-01-08","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-10-25","2021-12-14","2021-12-23","2021-12-29","2022-03-28"],"y":[13.1,22.4,10.018459235,9.85815761333333,20.8572471,7.527665909,7.277825224,9.725883647,10.4065488015,5.691287053,11.82218508,24.6,19,23.7,12.42,17.8,15.2,9.20666666666667,15.4,24.2666666666667,22,13.65,13.7333333333333],"type":"scatter","mode":"markers","name":"Devereux","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-24","2021-10-25","2021-12-13","2021-12-14","2022-03-27","2022-03-28"],"y":[19.1,14.9,14.4,13.2,10.2233333333333,14.1666666666667,7.77,15.1216666666667,12.85,9.99,16.74,7.365,9.25166666666667,5.39,10.82,15.005,16.6266666666667,15,8,8.74833333333333,15.808,14.3,24.8,15.5,9.2025,6.31,21.9,13.252,17.5075,11.87,18.4,11.904],"type":"scatter","mode":"markers","name":"Phelps","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[0.76,10.6,8.34,11.6675,14,11.7666666666667,13.0433333333333,13.8160072,8.50732667614286,7.8436302,9.22480430625,10.38346165075,15.82607134,10.2023944017,16.8,17.3,4.06,6.6,7.33666666666667,12.65,14.575,3.34333333333333,3.36,11.36,4.68,13.2285714285714,6.634,1.1425],"type":"scatter","mode":"markers","name":"Venoco","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-11-27","2019-12-04","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[13.7,12.2,12.974,10.62,10.3475,14.9,11.8233333333333,22.3457815971429,13.864967355,7.1978618028,9.0222692625,6.51579196,9.128512724875,9.95,16.55,17.5,7.04,9.75,14.624,10.7,9.03,6.29,8.56,7.175,14.985,23.1,17.1328571428571,15.14,14.008],"type":"scatter","mode":"markers","name":"Whittier","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[0,3.74,4.63,2.61,0.73,0.9,4.81,0.24,1.26,0,2.15,1.03,0.37,2.95,3.21,0,0.33,0,4.95,7.15,1.1,0.89,0,2.93,1.98,3.23,0.96,2.75],"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c06a562ec9ccf4517a46" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c06a562ec9ccf4517a46">{"x":{"visdat":{"33b4f97436":["function () ","plotlyVisDat"]},"cur_data":"33b4f97436","attrs":{"33b4f97436":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":{},"inherit":true},"33b4f97436.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Nitrite.Nitrate.um"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2018-01-09","2018-03-21","2019-11-27","2019-12-04","2019-12-16","2019-12-22","2020-01-08","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-10-25","2021-12-14","2021-12-23","2021-12-29","2022-03-28"],"y":[49.1,178,43.210667213,74.7268660666667,0.644878282,37.68342318,1.547105421,58.28618682,59.39674963,32.79078547,68.10416259,137,95.45,145,141.45,212,198,65.1666666666667,89.8,231.666666666667,175,68.2,87.0666666666667],"type":"scatter","mode":"markers","name":"Devereux","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-24","2021-10-25","2021-12-13","2021-12-14","2022-03-27","2022-03-28"],"y":[299,108,137,100.233333333333,139,87.4666666666667,105,100.616666666667,25.18,71.2,0.36,47.9766666666667,45.1766666666667,51.48,67.3066666666667,45.7875,102.36,245,25.3,62.2783333333333,193.6,232,0.12,2.08,46.45,35.5,0.79,75.62,16.0325,132.7,0.54,34.614],"type":"scatter","mode":"markers","name":"Phelps","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[14.6,67.6,45.4,60.175,96.8,60.4666666666667,78.1666666666667,0.930987476,6.768960389,0.789284028,0.973659249,1.04691058025,1.711336338,24.5418415055,79.05,90.6,0.07,9.09,38.3566666666667,114.12875,210,0.02,-0.01,45.46,17.6825,91.5142857142857,32.68,0.7375],"type":"scatter","mode":"markers","name":"Venoco","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-11-27","2019-12-04","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[114,74.3,36.76,26.8666666666667,25.3,5.02,51.1833333333333,95.8006398428571,69.321711495,36.795326498,21.119070725,29.25534341,29.724010266625,45.6,118.3,171,18.5,77.4333333333333,79.4,51.1,8.31,9.23,59.2966666666667,34,111.975,104,92.9428571428571,21.28,56.382],"type":"scatter","mode":"markers","name":"Whittier","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[0,3.74,4.63,2.61,0.73,0.9,4.81,0.24,1.26,0,2.15,1.03,0.37,2.95,3.21,0,0.33,0,4.95,7.15,1.1,0.89,0,2.93,1.98,3.23,0.96,2.75],"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a9468565e2d53154bf74" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a9468565e2d53154bf74">{"x":{"visdat":{"33b423b67d31":["function () ","plotlyVisDat"]},"cur_data":"33b423b67d31","attrs":{"33b423b67d31":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","color":{},"inherit":true},"33b423b67d31.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Ammonia.um"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2018-01-09","2018-03-21","2019-11-27","2019-12-04","2019-12-16","2019-12-22","2020-01-08","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-10-25","2021-12-14","2021-12-23","2021-12-29","2022-03-28"],"y":[9.69,42.1,15.4193995605,6.38820624933333,4.035284927,3.931790132,0.686606407,10.84477071,1.666105854,3.121517444,3.339281247,40,22,12.7,6.485,7.06,2.955,12.2766666666667,20.6,3.33666666666667,12.6,3.5,11.4533333333333],"type":"scatter","mode":"markers","name":"Devereux","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-24","2021-10-25","2021-12-13","2021-12-14","2022-03-27","2022-03-28"],"y":[40.2,10.6,7.42,1.26,1.31333333333333,1.13,0.37,0.56,0.89,2.31,48.01,7.33666666666667,0.543333333333333,0.24,0.94,25.3675,22.1733333333333,0.38,20.1,1.12666666666667,0.326,0.2,10.6,2.01,5.93375,1.335,11.9,7.854,2.5,1.425,0.195,0.302],"type":"scatter","mode":"markers","name":"Phelps","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[6.36,14.4,5.06,6.5575,3.92,1.76,1.87,0.243546407,6.50146726485714,23.06255966,21.5419691325,31.7308726475,45.94393386,21.423546052,26.25,17.3,3.88,3.22,6.05166666666667,5.7025,2.6325,0.0766666666666667,0.045,11.206,18.8,8.24285714285714,13.74,0.15],"type":"scatter","mode":"markers","name":"Venoco","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-01","2019-02-02","2019-11-27","2019-12-04","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-27","2020-12-28","2020-12-29","2021-01-25","2021-01-27","2021-01-28","2021-01-29","2021-03-03","2021-03-09","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[9.19,4.15,1.404,1.98666666666667,0.4925,7.11,1.27166666666667,56.6023050771429,0.892668016,0.449870936,0.508483957,1.003708101,2.2326852604375,32.4,22.85,14.5,19.5,7.82833333333333,4.466,3.15,3.79,4.67,8.83555555555555,3.04,12.785,16.085,2.53714285714286,5.578,1.736],"type":"scatter","mode":"markers","name":"Whittier","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2017-09-12","2018-01-09","2018-03-21","2019-01-15","2019-01-16","2019-01-17","2019-02-02","2019-12-03","2019-12-04","2020-03-09","2020-03-10","2020-03-11","2020-03-15","2020-03-16","2020-12-28","2020-12-29","2021-01-25","2021-01-26","2021-01-27","2021-01-28","2021-01-29","2021-03-10","2021-03-11","2021-10-25","2021-12-13","2021-12-14","2021-12-29","2022-03-28"],"y":[0,3.74,4.63,2.61,0.73,0.9,4.81,0.24,1.26,0,2.15,1.03,0.37,2.95,3.21,0,0.33,0,4.95,7.15,1.1,0.89,0,2.93,1.98,3.23,0.96,2.75],"name":"Rain","type":"bar","marker":{"color":"rgb(158,202,225)","line":{"color":"rgb(8,48,107)","width":0.5}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>